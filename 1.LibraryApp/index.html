<!DOCTYPE html>
<html>
  <head>
    <link href="styles/style.css" rel="stylesheet" type="text/css">

<!--     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
 -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <meta charset="UTF-8">
    <title>Library Application</title>
  </head>
  <body>
    <h1 align="center" class="titleStyle" id="title">Library</h1>

    <div id="bookList" class="titleStyle">
    <script >

      function reply_click(){
        if(this.className == "tile"){
          this.className = "unreadtile";
        }
        else{
          this.className = "tile";
        }
      }

      function render(s, parentRef, childRef, element) {
        var newbl = document.createElement(element);
        newbl.textContent = s['title'];
        newbl.id = s['title'].replace(/ /g,"");
        if(read){
          newbl.className = 'tile';
        }
        else{
          newbl.className = 'unreadtile';
        }
        newbl.addEventListener('click',reply_click);
        parentRef.insertBefore(newbl, childRef);

        var author = document.createElement('li');
        author.textContent = s['author'];
        author.classList.add('author');
        newbl.insertBefore(author,null);

        var numPages = document.createElement('li');
        numPages.textContent = s['numPages']+" pages";
        numPages.classList.add('numPages');
        newbl.insertBefore(numPages,null);

        var read = document.createElement('li');
        read.textContent = s['read'];
        read.classList.add("read");
        read.id = "read_"+s["title"];
        newbl.insertBefore(read,null);

        var button = document.createElement('button');
        button.id = "button_"+s['title'];
        if(read){
          button.textContent = "Read";
        }
        else{
          button.textContent = "Unread";
        }
        newbl.insertBefore(button, null);
        }

        for(var i=0; i<localStorage.length -1; i++){
          var s = JSON.parse(localStorage.getItem(localStorage.key(i)));
          render(s, document.getElementById("bookList"), null, 'div');
        }

    </script>     
    </div>

   
    <form action = "bookForm.html" id="bookForm" >
      <button id="nb">New Book</button>
    </form>
    <script src="scripts/index.js"></script>
  </body>
</html>